<!DOCTYPE html>
<html lang="en">

<head>
    <!--BOOTSTRAP CDN-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!--END OF BOOTSTRAP CDN-->
    <script type="text/javascript" src="indexScripts.js"></script>
    <link rel="stylesheet" href="CSS Sheets/index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body id="body-overrides">

    <!--THIS ROW IS FOR THE TOP OF THE WEBPAGE, USED FOR THE REALTYYC BANNER AND MENU OPTIONS-->
    <nav class="navbar navbar-expand-sm">
        <div class="container-fluid">

            <a class="navbar-brand" href="#">
                <img src="House Images/logo.png" class="img-fluid" alt="...">
            </a>

            <form class="container-fluid">
                <button class="btn btn-secondary" type="button" onclick="location.href = 'index.html'">Back To
                    Listings</button>
                <button class="btn btn-secondary" type="button" onclick="location.href = 'favoritedListings.html'">View
                    Favorited Listings</button>
                <button class="btn btn-secondary" type="button" onclick="location.href = 'realtors.html'">Current
                    Realtors</button>
            </form>
        </div>
    </nav>

    <div class="container-fluid" id="main-container">

        <div class="row border border-2 border-dark-subtle rounded-top rounded-bottom mb-1 row-overrides">

            <div class="row">

                <div class="col-sm-3">
                    <img src="House Images/DefaultHouse.jpg" class="img-fluid img-thumbnail" alt="..."
                        id="listing-image">
                </div>

                <div class="col-sm-5">
                    <div class="row fw-bold fs-3">
                        <div class="col" id="listing-price"></div>
                        <div class="col" id="listing-location"></div>
                    </div>
                    <div class="row fw-bold fs-2 listing-buffer" id="listing-desc"></div>
                </div>

                <div class="col-sm-4 text-center">
                    <div class="card mb-3 realtor-card" style="max-width: 540px;">
                        <div class="row g-0">
                            <div class="col-md-4">
                                <img src="Realtor Images\Bella.jpg" class="img-fluid rounded-start" alt="...">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">Associated Realtor</h5>
                                    <p class="card-text">Your best investment opportunity. If you want to discuss
                                        this listing further, please contact me!</p>
                                    <p class="card-text"><small class="text-body-secondary">Phone: 587-289-8545</small>
                                    </p>
                                    <p class="card-text"><small class="text-body-secondary">Email:
                                            Bella@REALTYYC.ca</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="favorite" onclick=FavoriteTheListing()>Favorite This
                        Listing!</button>
                    <button class="btn btn-danger" id="unfavorite" onclick=UnFavoriteTheListing()>Unfavorite This
                        Listing!</button>
                </div>


            </div>

            <div class="row flex-grow-1">
                <div id="carousel" class="carousel slide col-sm-3">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="" class="d-block w-100 img-thumbnail" id="inside-1" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="" class="d-block w-100 img-thumbnail" id="inside-2" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="" class="d-block w-100 img-thumbnail" id="inside-3" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="" class="d-block w-100 img-thumbnail" id="inside-4" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="" class="d-block w-100 img-thumbnail" id="inside-5" alt="...">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                <div class="col">
                    <div class="row">
                        <h1 class="text-center fs-bold"><u>Features</u></h1>
                    </div>
                    <div class="col">

                    </div>
                    <div class="col">

                    </div>
                </div>
            </div>

        </div>

    </div>


    <script>
        const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'CAD' });
        var listing = getListingByID(sessionStorage.getItem("id"));
        var stored_listings = JSON.parse(sessionStorage.getItem("listings"));
        document.getElementById("listing-image").src = listing.image;
        document.getElementById("listing-location").innerHTML = "Location: " + listing.location;
        document.getElementById("listing-price").innerHTML = "Price: " + formatter.format(listing.price);
        document.getElementById("listing-desc").innerHTML = listing.longDesc;
        document.getElementById("inside-1").src = listing.interiorImages[0];
        document.getElementById("inside-2").src = listing.interiorImages[1];
        document.getElementById("inside-3").src = listing.interiorImages[2];
        document.getElementById("inside-4").src = listing.interiorImages[3];
        document.getElementById("inside-5").src = listing.interiorImages[4];
        //document.getElementById("list-bedrooms").innerHTML = "Bedrooms: " + listing.noBedrooms;
        //document.getElementById("list-bathrooms").innerHTML = "Bathrooms: " + listing.noBathrooms;
        //document.getElementById("list-floors").innerHTML = "Floors: " + listing.floors;
        //document.getElementById("list-basement").innerHTML = "Basement: " + listing.basement;

        window.onload = function setButtons() {
            if (listing.isFavorited == true) {
                setButtonsOnTrue();
            }
            else {
                setButtonsOnFalse();
            }
        }

        function setButtonsOnTrue() {
            document.getElementById("favorite").disabled = true;
            document.getElementById("unfavorite").disabled = false;
        }

        function setButtonsOnFalse() {
            document.getElementById("favorite").disabled = false;
            document.getElementById("unfavorite").disabled = true;
        }

        function FavoriteTheListing()
        {
            for(var i = 0; i < stored_listings.length; i++)
            {
                if(stored_listings[i].listingID == listing.listingID)
                {
                    stored_listings[i].isFavorited = true;
                    document.getElementById("favorite").disabled = true;
                    document.getElementById("unfavorite").disabled = false;
                    sessionStorage.setItem("listings", JSON.stringify(stored_listings));
                }
            }
        }

        function UnFavoriteTheListing()
        {
            for(var i = 0; i < stored_listings.length; i++)
            {
                if(stored_listings[i].listingID == listing.listingID)
                {
                    stored_listings[i].isFavorited = false;
                    document.getElementById("favorite").disabled = false;
                    document.getElementById("unfavorite").disabled = true;
                    sessionStorage.setItem("listings", JSON.stringify(stored_listings));
                }
            }
        }
    </script>
</body>
</html>